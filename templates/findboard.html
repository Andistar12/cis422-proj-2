{% extends "parent_layout.html" %}
{% set active_page = "findboard" %}
{% block content %}

<!-- This is the find board page where user can browse boards and search for boards and subscribe to boards. -->

<h3>Find a board!</h3>
<input type="text" placeholder="Search for boards">
<!-- list boards here in somesort of grid-->

<section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12">
    <div class="text-center pb-12">
        <h1 class="font-bold text-3xl md:text-4xl lg:text-5xl font-heading">
            Find a Board
        </h1>
    </div>
    <div class="grid place-items-center grid-cols-1 sm:grid-cols-2  md:grid-cols-2 lg:grid-cols-3 gap-4 xl:grid-cols-4 justify-center" id="findboard_section"></div>
</section>

<!-- Define the template for an arbitrary board -->
<template id="findboard_template">
    <div class="w-full max-w-md py-4 px-8 bg-nav_grey shadow-lg rounded-lg my-20 flex flex-col justify-center">
        <div>
            <h3 class="text-jade text-3xl font-semibold">Temp Board Name</h3>
            <p class="mt-2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae dolores deserunt ea doloremque natus error, rerum quas odio quaerat nam ex commodi hic, suscipit in a veritatis pariatur minus consequuntur!</p>
        </div>
        <div class="flex justify-end mt-4">
            <a href="#" class="text-xl font-medium text-chardonnay">Go to board -></a>
        </div>
        </div>
</template>

<!-- Javascript to load the boards-->
<script>
    $(document).ready(function () {
        if ('content' in document.createElement('template')) {

            // Find parent section and template child to clone
            let sec = document.querySelector("#findboard_section");
            let template = document.querySelector("#findboard_template")

            // Define success function
            success = function(data) {

                data.forEach(function(board) {
                    // Setup board
                    let clone = template.content.cloneNode(true);
                    let title = clone.querySelector("h3");
                    title.innerHTML = board["board_name"];
                    let desc = clone.querySelector("p");
                    desc.innerHTML = board["board_description"];
                    let link = clone.querySelector("a");
                    // TODO set board link

                    // Add board to layout
                    sec.appendChild(clone);
                });

                console.log("Received data from backend:");
                console.log(data);
            };

            // Define error function
            error = function() {
                alert("An error occurred fetching boards. Reload page?")
            };

            // Do board fetch
            fetch_boards(".*", 0, success, error);
        }
    });
</script>

{% endblock %}
